{
  "name": "Create Hypothesis",
  "nodes": [
    {
      "parameters": {
        "authentication": "nocoDbApiToken",
        "operation": "getAll",
        "workspaceId": "w8fin9y3",
        "projectId": "pb01kdovzticqxi",
        "table": "muqbk732nl9jb7c",
        "limit": 1,
        "options": {
          "where": "=(project_name,eq,{{ $json.project_name }})"
        }
      },
      "type": "n8n-nodes-base.nocoDb",
      "typeVersion": 3,
      "position": [
        -3840,
        3040
      ],
      "id": "42dca2a9-7a3e-41d0-9241-6a4c788c4313",
      "name": "Get infos projet",
      "executeOnce": true,
      "credentials": {
        "nocoDbApiToken": {
          "id": "A7ud9P88oTJkeL1f",
          "name": "NocoDb AlpAct - Cloud"
        }
      }
    },
    {
      "parameters": {
        "jsonSchemaExample": "{\n  \"vision_projet\": {\n    \"mission\": \"string (1 phrase)\",\n    \"probleme_central\": \"string\",\n    \"solution_proposee\": \"string\"\n  },\n  \"marche_cible\": {\n    \"segment_principal\": \"string avec caractÃ©ristiques\",\n    \"taille_marche\": \"string\",\n    \"concurrents_principaux\": [\"string1\", \"string2\", \"string3\"],\n    \"canaux_acquisition\": [\"string1\", \"string2\", \"string3\"]\n  },\n  \"produit\": {\n    \"value_proposition\": \"string\",\n    \"fonctionnalites_cles\": [\"string1\", \"string2\", \"string3\"],\n    \"avantage_concurrentiel\": \"string\"\n  },\n  \"contexte_business\": {\n    \"stade_projet\": \"idee|mvp|traction\",\n    \"objectifs_prioritaires\": [\"string1\", \"string2\"],\n    \"contraintes_identifiees\": \"string\"\n  },\n  \"hypotheses_depart\": {\n    \"sur_probleme\": \"string\",\n    \"sur_cible\": \"string\", \n    \"sur_solution\": \"string\"\n  },\n  \"gaps_questions\": {\n    \"infos_manquantes\": [\"string1\", \"string2\"],\n    \"incoherences\": [\"string1\", \"string2\"],\n    \"zones_flou\": [\"string1\", \"string2\"]\n  }\n}"
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        -3056,
        3280
      ],
      "id": "129684a1-2316-47ee-89d5-31da09c0b838",
      "name": "Structured Output Parser3"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=Analyse ces donnÃ©es et retourne la synthÃ¨se au format JSON suivant :\n\n# DONNÃ‰ES PROJET\n{{ $json.formatted_data }}\n\n# FORMAT JSON OBLIGATOIRE\n{\n  \"vision_projet\": {\n    \"mission\": \"string (1 phrase)\",\n    \"probleme_central\": \"string\",\n    \"solution_proposee\": \"string\"\n  },\n  \"marche_cible\": {\n    \"segment_principal\": \"string avec caractÃ©ristiques\",\n    \"taille_marche\": \"string\",\n    \"concurrents_principaux\": [\"string1\", \"string2\", \"string3\"],\n    \"canaux_acquisition\": [\"string1\", \"string2\", \"string3\"]\n  },\n  \"produit\": {\n    \"value_proposition\": \"string\",\n    \"fonctionnalites_cles\": [\"string1\", \"string2\", \"string3\"],\n    \"avantage_concurrentiel\": \"string\"\n  },\n  \"contexte_business\": {\n    \"stade_projet\": \"idee|mvp|traction\",\n    \"objectifs_prioritaires\": [\"string1\", \"string2\"],\n    \"contraintes_identifiees\": \"string\"\n  },\n  \"hypotheses_depart\": {\n    \"sur_probleme\": \"string\",\n    \"sur_cible\": \"string\", \n    \"sur_solution\": \"string\"\n  },\n  \"gaps_questions\": {\n    \"infos_manquantes\": [\"string1\", \"string2\"],\n    \"incoherences\": [\"string1\", \"string2\"],\n    \"zones_flou\": [\"string1\", \"string2\"]\n  }\n}\n\nRetourne UNIQUEMENT le JSON, sans texte explicatif.",
        "hasOutputParser": true,
        "messages": {
          "messageValues": [
            {
              "message": "=Tu es un consultant en stratÃ©gie business expert en validation d'hypothÃ¨ses PMF.\nTu analyses des donnÃ©es projets et retournes EXCLUSIVEMENT du JSON valide.\nAucun texte avant ou aprÃ¨s le JSON.\nSois factuel, synthÃ©tique et identifie les gaps critiques."
            }
          ]
        },
        "batching": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "typeVersion": 1.7,
      "position": [
        -3168,
        3040
      ],
      "id": "1d80afb5-8de4-4d6c-bdc1-f848f956df3c",
      "name": "Creation contexte projet"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=Contexte du projet :\n{{ $json.formatted_analysis }}\n\nTÃ¢che : GÃ©nÃ©rer une matrice complÃ¨te dâ€™hypothÃ¨ses PMF avec 3 variantes pour chaque dimension (problÃ¨mes, segments, propositions de valeur).\n\nInstructions pour les variantes :\n- PROBLÃˆMES (P1, P2, P3) :\n  - P1 = problÃ¨me principal identifiÃ©\n  - P2 = autre angle du mÃªme pain point mais vÃ©cu diffÃ©remment (ex: Ã©motionnel, opÃ©rationnel, financier)\n  - P3 = un frein plus systÃ©mique ou cachÃ© qui empÃªche la rÃ©solution du problÃ¨me\n- SEGMENTS (S1, S2, S3) :\n  - S1 = segment prioritaire Ã©vident\n  - S2 = segment adjacent ou niche proche\n  - S3 = early adopters atypiques ou segment extrÃªme\n- VALUE PROPOSITIONS (VP1, VP2, VP3) :\n  - VP1 = bÃ©nÃ©fice direct le plus attendu\n  - VP2 = diffÃ©renciation sur la vitesse, lâ€™expÃ©rience utilisateur ou lâ€™intÃ©gration\n  - VP3 = angle de preuve sociale, rÃ©duction de risque, ou coÃ»t\n\nFormat JSON attendu :\n{\n  \"problemes\": [\n    {\n      \"id\": \"P1\",\n      \"titre\": \"Concise problem title in French\",\n      \"description\": \"Detailed pain point description explaining user frustration, frequency, and current inadequate solutions\",\n      \"intensite_estimee\": \"faible|moyenne|forte\",\n      \"mesurable_par\": \"Specific validation method (surveys, interviews, behavioral data, etc.)\",\n      \"frequence_occurrence\": \"How often users encounter this problem\",\n      \"cout_inaction\": \"Cost or consequence of not solving this problem\"\n    },\n    {\n      \"id\": \"P2\",\n      \"titre\": \"Second distinct problem angle\",\n      \"description\": \"Different perspective on the core pain point\",\n      \"intensite_estimee\": \"faible|moyenne|forte\", \n      \"mesurable_par\": \"Validation approach for this specific angle\",\n      \"frequence_occurrence\": \"Problem frequency for this variation\",\n      \"cout_inaction\": \"Impact of leaving this problem unsolved\"\n    },\n    {\n      \"id\": \"P3\",\n      \"titre\": \"Third unique problem angle\",\n      \"description\": \"Third distinct facet of the user struggle\",\n      \"intensite_estimee\": \"faible|moyenne|forte\",\n      \"mesurable_par\": \"Specific measurement approach\",\n      \"frequence_occurrence\": \"How often this manifests\",\n      \"cout_inaction\": \"Consequences of inaction\"\n    }\n  ],\n  \"segments\": [\n    {\n      \"id\": \"S1\",\n      \"nom\": \"Primary segment name in French\",\n      \"description\": \"Detailed characteristics including demographics, psychographics, and behavioral patterns\",\n      \"taille_estimee\": \"Market size with rationale (e.g., '50K users in France based on industry data')\",\n      \"canaux_acces\": [\"Primary channel\", \"Secondary channel\", \"Tertiary channel\"],\n      \"comportements_cles\": \"Key behaviors, decision-making patterns, and purchasing habits\",\n      \"budget_disponible\": \"Estimated spending capacity for this solution\",\n      \"urgence_besoin\": \"How urgently this segment needs the solution\",\n      \"market_type\":\"B2B ou B2C ou B2B2C\"\n    },\n    {\n      \"id\": \"S2\", \n      \"nom\": \"Adjacent segment name\",\n      \"description\": \"Characteristics of related but distinct market segment\",\n      \"taille_estimee\": \"Different market size estimation with reasoning\",\n      \"canaux_acces\": [\"Different primary channel\", \"Alternative channels\"],\n      \"comportements_cles\": \"Distinct behavioral patterns for this segment\",\n      \"budget_disponible\": \"Budget considerations for this group\",\n      \"urgence_besoin\": \"Need urgency level\",\n\"market_type\":\"B2B ou B2C ou B2B2C\"\n    },\n    {\n      \"id\": \"S3\",\n      \"nom\": \"Alternative segment name\", \n      \"description\": \"Third market segment with unique characteristics\",\n      \"taille_estimee\": \"Third market size estimate with justification\",\n      \"canaux_acces\": [\"Unique access channels for this segment\"],\n      \"comportements_cles\": \"Specific behaviors distinguishing this group\",\n      \"budget_disponible\": \"Financial capacity assessment\",\n      \"urgence_besoin\": \"Problem urgency for this segment\",\n\"market_type\":\"B2B ou B2C ou B2B2C\"\n    }\n  ],\n  \"value_propositions\": [\n    {\n      \"id\": \"VP1\",\n      \"titre\": \"Core value proposition title in French\",\n      \"description\": \"Primary benefit and how it solves the user's problem better than alternatives\",\n      \"differenciateur\": \"Clear competitive advantage and unique positioning vs existing solutions\",\n      \"preuve_valeur\": \"Specific method to demonstrate value (metrics, case studies, trials, etc.)\",\n      \"benefice_quantifiable\": \"Measurable outcome users can expect\",\n      \"temps_realisation\": \"Timeline to achieve promised benefits\",\n    \"key_benefits\":[\"a list of 2-3 key benefits for this value proposition perceived by this customer segment\"],\n      \"product_name\": \"a name for this product/service from this value proposition\"\n    },\n    {\n      \"id\": \"VP2\",\n      \"titre\": \"Alternative benefit angle\",\n      \"description\": \"Different value angle addressing same or related problems\",\n      \"differenciateur\": \"Distinct competitive positioning for this approach\", \n      \"preuve_valeur\": \"Value demonstration method for this variant\",\n      \"benefice_quantifiable\": \"Quantifiable benefit for this value prop\",\n      \"temps_realisation\": \"Expected timeframe for benefit realization\",\n    \"key_benefits\":[\"a list of 2-3 key benefits for this value proposition perceived by this customer segment\"],\n      \"product_name\": \"a name for this product/service from this value proposition\"\n    },\n    {\n      \"id\": \"VP3\",\n      \"titre\": \"Third value proposition angle\",\n      \"description\": \"Third distinct benefit perspective\", \n      \"differenciateur\": \"Unique differentiation approach\",\n      \"preuve_valeur\": \"Validation method for this value angle\",\n      \"benefice_quantifiable\": \"Measurable outcome specific to this VP\",\n      \"temps_realisation\": \"Timeline for achieving these benefits\",\n    \"key_benefits\":[\"a list of 2-3 key benefits for this value proposition perceived by this customer segment\"],\n      \"product_name\": \"a name for this product/service from this value proposition\"\n    }\n  ],\n  \"hypotheses_combinations\": [\n    {\n      \"hypothese_id\": \"VP1_S1_P1\",\n      \"description\": \"Brief description of this specific PMF hypothesis combining VP1, S1, and P1\",\n      \"confiance_niveau\": \"faible|moyenne|forte\",\n      \"test_priorite\": \"haute|moyenne|basse\",\n      \"validation_rapide\": \"Quick test method for this combination\"\n    }\n    // Include all 27 combinations (VP1-VP3 Ã— S1-S3 Ã— P1-P3)\n  ],\n  \"metadata\": {\n    \"projet\": \"{{ $('Creation contexte projet').item.json.output.vision_projet.mission }}\",\n    \"total_combinaisons\": 27,\n    \"genere_le\": \"{{ $now }}\",\n    \"langue_contenu\": \"franÃ§ais\",\n    \"framework_utilise\": \"Lean Startup + Customer Development\",\n    \"niveau_detail\": \"dÃ©taillÃ©\"\n  }\n}\n\nRÃ¨gles :\n- Produire 3 problÃ¨mes, 3 segments, 3 VP, puis 27 combinaisons complÃ¨tes\n- Tous les textes doivent Ãªtre en franÃ§ais\n- Inclure pour chaque problÃ¨me un critÃ¨re mesurable, pour chaque segment un canal dâ€™accÃ¨s prÃ©cis, pour chaque VP une mÃ©thode de preuve de valeur\n- Sortir uniquement le JSON, sans aucun texte supplÃ©mentaire",
        "hasOutputParser": true,
        "messages": {
          "messageValues": [
            {
              "message": "=You are a Product-Market-Fit expert and business hypothesis validation specialist with deep expertise in startup methodology, customer discovery, and lean validation frameworks.\n\nYour role is to generate structured PMF matrices that explore *meaningfully different* angles of the same project through systematic variation of customer segments, value propositions, and problems addressed.\n\nCore Competencies:\n- Customer segmentation and behavioral analysis\n- Value proposition design and differentiation\n- Problem validation and measurement frameworks\n- Rapid hypothesis testing methodologies\n- Market sizing and opportunity assessment\n\nCritical Divergence Rules:\n- Each of the 3 variants for a dimension (problems, segments, value propositions) must explore *different perspectives*:\n  - Segments: demographic vs. psychographic vs. behavioral vs. niche B2B/B2C/B2B2C\n  - Problems: functional pain vs. emotional friction vs. systemic barrier\n  - Value propositions: efficiency vs. cost saving vs. experience enhancement\n- Do not produce superficial rewordings; each variant must stand alone as a distinct hypothesis.\n- Ensure each hypothesis is SMART and testable with clear validation methods.\n\nOutput Rules:\n- Return ONLY valid JSON, in French language\n- Include 27 hypotheses combinations (3 Ã— 3 Ã— 3)\n- Each combination must have a unique ID and a quick test method\n- No explanatory text outside the JSON\n"
            }
          ]
        },
        "batching": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "typeVersion": 1.7,
      "position": [
        -1904,
        3040
      ],
      "id": "57305cde-5173-4cfe-b11e-17560d421baf",
      "name": "Generation hypothÃ¨ses PMF"
    },
    {
      "parameters": {
        "jsonSchemaExample": "{\n  \"problemes\": [\n    {\n      \"id\": \"P1\",\n      \"titre\": \"string\",\n      \"description\": \"string dÃ©taillÃ©e du pain point\",\n      \"intensite_estimee\": \"faible|moyenne|forte\",\n      \"mesurable_par\": \"string (comment valider)\"\n    }\n  ],\n  \"segments\": [\n    {\n      \"id\": \"S1\", \n      \"nom\": \"string\",\n      \"description\": \"string avec caractÃ©ristiques\",\n      \"taille_estimee\": \"string\",\n      \"canaux_acces\": [\"canal1\", \"canal2\"],\n      \"comportements_cles\": \"string\",\n      \"market_type\":\"string\"\n    }\n  ],\n  \"value_propositions\": [\n    {\n      \"id\": \"VP1\",\n      \"titre\": \"string\", \n      \"description\": \"string du bÃ©nÃ©fice principal\",\n      \"differenciateur\": \"string (vs concurrence)\",\n      \"preuve_valeur\": \"string (comment dÃ©montrer)\",\n      \"key_benefits\":[\"a list of 2-3 key benefits for this value proposition perceived by this customer segment\"],\n      \"product_name\": \"a name for this product/service from this value proposition\"\n    }\n  ],\n  \"metadata\": {\n    \"projet\": \"{{ $('Creation contexte projet').item.json.output.vision_projet.mission }}\",\n    \"total_combinaisons\": 27,\n    \"genere_le\": \"{{ $now }}\"\n  }\n}\n"
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        -1728,
        3232
      ],
      "id": "bf633af2-5aae-4f79-863b-0b55a9f083f4",
      "name": "Structured Output Parser4"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "gpt-5-mini",
          "mode": "list",
          "cachedResultName": "gpt-5-mini"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        -3216,
        3264
      ],
      "id": "c7579935-cc16-4ed6-9dea-0b24f4e338f7",
      "name": "GPT-5-MINI",
      "credentials": {
        "openAiApi": {
          "id": "xA5aDLFhcAyipXLc",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "// Code Ã  utiliser dans un nÅ“ud \"Code\" de N8N\n// RÃ©cupÃ©rer les donnÃ©es du nÅ“ud NocoDB prÃ©cÃ©dent\nconst data = $input.all();\n\n// Fonction pour transformer le JSON en texte structurÃ©\nfunction formatDataForPrompt(item) {\n  const json = item.json;\n  \n  return `\nPROJET: ${json.project_name}\n\nINFORMATIONS GÃ‰NÃ‰RALES:\n- Contact fondateurs: ${json.founders_contact}\n- Mission: ${json.mission}\n- Vision: ${json.vision}\n- Valeurs: ${json.values}\n\nHYPOTHÃˆSE ET TEST:\n- HypothÃ¨se: ${json.hypothesis}\n- Objectif de test: ${json.test_objective}\n- Premier cas d'usage: ${json.first_use_case}\n\nPROBLÃˆME ET SOLUTION:\n- Point de douleur: ${json.pain_point}\n- Solution proposÃ©e: ${json.solution}\n- BÃ©nÃ©fice mesurable: ${json.measurable_benefit}\n- DiffÃ©renciation: ${json.differentiation}\n\nMARCHÃ‰ ET CIBLE:\n- Type de marchÃ©: ${json.market_type}\n- Persona: ${json.persona}\n- Alternatives actuelles: ${json.current_alternatives}\n- BarriÃ¨res Ã  l'adoption: ${json.adoption_barriers}\n- Early adopters: ${json.early_adopters}\n\nCANAUX ET STRATÃ‰GIE:\n- Canaux existants: ${json.existing_channels}\n- Canaux prioritaires: ${json.priority_channels}\n\nPARAMÃˆTRES DU TEST:\n- Budget test: ${json.test_budget}\n- DurÃ©e test: ${json.test_duration}\n- Livrables demandÃ©s: ${json.outputs_requested}\n\nMESURES DE SUCCÃˆS:\n- KPI: ${json.kpi}\n- Seuil de succÃ¨s: ${json.success_threshold}\n- Outils de tracking: ${json.tracking_tools}\n\n---\n`;\n}\n\n// Transformer tous les items en texte\nconst formattedText = data.map(formatDataForPrompt).join('\\n');\n\n// Retourner le texte formatÃ©\nreturn [{\n  json: {\n    formatted_data: formattedText,\n    original_count: data.length\n  }\n}];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -3424,
        3040
      ],
      "id": "1ea8022b-01c7-4a24-b9f1-93ede22f228a",
      "name": "Format data projet"
    },
    {
      "parameters": {
        "jsCode": "const data = $input.all();\n\n// Fonction pour gÃ©nÃ©rer toutes les combinaisons et les rÃ©partir en 3 tableaux\nfunction generateCombinationTables(item) {\n  const analysis = item.json.output;\n  const { problemes, segments, value_propositions } = analysis;\n  \n  // GÃ©nÃ©rer toutes les 27 combinaisons (3Ã—3Ã—3)\n  const allCombinations = [];\n  \n  problemes.forEach(probleme => {\n    segments.forEach(segment => {\n      value_propositions.forEach(vp => {\n        allCombinations.push({\n          combination_id: `${probleme.id}_${segment.id}_${vp.id}`,\n          probleme: {\n            id: probleme.id,\n            titre: probleme.titre,\n            description: probleme.description,\n            intensite: probleme.intensite_estimee,\n            mesurable_par: probleme.mesurable_par\n          },\n          segment: {\n            id: segment.id,\n            nom: segment.nom,\n            description: segment.description,\n            taille_estimee: segment.taille_estimee,\n            canaux_acces: segment.canaux_acces,\n            comportements_cles: segment.comportements_cles\n          },\n          value_proposition: {\n            id: vp.id,\n            titre: vp.titre,\n            description: vp.description,\n            differenciateur: vp.differenciateur,\n            preuve_valeur: vp.preuve_valeur\n          }\n        });\n      });\n    });\n  });\n  \n  // RÃ©partir les 27 combinaisons en 3 tableaux de 9\n  const table1 = allCombinations.slice(0, 9);   // Combinaisons 1-9\n  const table2 = allCombinations.slice(9, 18);  // Combinaisons 10-18\n  const table3 = allCombinations.slice(18, 27); // Combinaisons 19-27\n  \n  return {\n    metadata: {\n      projet: analysis.metadata.projet,\n      total_combinaisons: analysis.metadata.total_combinaisons,\n      genere_le: analysis.metadata.genere_le,\n      repartition: \"3 tableaux de 9 combinaisons chacun\"\n    },\n    tableau_1: {\n      nom: \"Combinaisons 1-9\",\n      description: \"Premier lot de combinaisons ProblÃ¨me Ã— Segment Ã— Value Proposition\",\n      combinaisons: table1\n    },\n    tableau_2: {\n      nom: \"Combinaisons 10-18\", \n      description: \"DeuxiÃ¨me lot de combinaisons ProblÃ¨me Ã— Segment Ã— Value Proposition\",\n      combinaisons: table2\n    },\n    tableau_3: {\n      nom: \"Combinaisons 19-27\",\n      description: \"TroisiÃ¨me lot de combinaisons ProblÃ¨me Ã— Segment Ã— Value Proposition\", \n      combinaisons: table3\n    }\n  };\n}\n\n// Traiter les donnÃ©es\nconst result = generateCombinationTables(data[0]);\n\n// Retourner les 3 tableaux\nreturn [{\n  json: result\n}];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -1536,
        3040
      ],
      "id": "15a70659-3d3b-4179-a209-792d6e8b71fb",
      "name": "Transform en Tableaux 9X9X9 combinaisons"
    },
    {
      "parameters": {
        "jsCode": "// Fonction pour formatter une combinaison en texte\nfunction formatCombinationToText(combination) {\n  return `\nCOMBINAISON: ${combination.combination_id}\nðŸŽ¯ PROBLÃˆME CIBLÃ‰:\nID: ${combination.probleme.id}\nTitre: ${combination.probleme.titre}\nDescription: ${combination.probleme.description}\nIntensitÃ©: ${combination.probleme.intensite}\nMesurable par: ${combination.probleme.mesurable_par}\n\nðŸ‘¥ SEGMENT DE MARCHÃ‰:\nID: ${combination.segment.id}\nNom: ${combination.segment.nom}\nDescription: ${combination.segment.description}\nTaille estimÃ©e: ${combination.segment.taille_estimee}\nCanaux d'accÃ¨s: ${combination.segment.canaux_acces.join(' â€¢ ')}\nComportements clÃ©s: ${combination.segment.comportements_cles}\n\nðŸ’Ž PROPOSITION DE VALEUR:\nID: ${combination.value_proposition.id}\nTitre: ${combination.value_proposition.titre}\nDescription: ${combination.value_proposition.description}\nDiffÃ©renciateur: ${combination.value_proposition.differenciateur}\nPreuve de valeur: ${combination.value_proposition.preuve_valeur}\n\nâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n`;\n}\n\n// Fonction pour formatter un tableau complet de combinaisons\nfunction formatTableToText(tableData) {\n  const headerText = `\nðŸš€ ${tableData.nom.toUpperCase()}\n${tableData.description}\n\nNombre de combinaisons: ${tableData.combinaisons.length}\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n`;\n\n  const combinationsText = tableData.combinaisons\n    .map(combination => formatCombinationToText(combination))\n    .join('\\n');\n\n  return headerText + combinationsText;\n}\n\n// Traiter les donnÃ©es d'entrÃ©e\nconst inputData = $input.first().json;\n\n// Vous pouvez choisir quel tableau formatter (tableau_1, tableau_2, ou tableau_3)\n// Par dÃ©faut, on formate le tableau_1, mais vous pouvez changer selon vos besoins\n\nconst formattedTable1 = formatTableToText(inputData.tableau_1);\nconst formattedTable2 = formatTableToText(inputData.tableau_2);\nconst formattedTable3 = formatTableToText(inputData.tableau_3);\n\n// Retourner les textes formatÃ©s\nreturn [{\n  json: {\n    metadata: inputData.metadata,\n    tableau_1_text: formattedTable1,\n    tableau_2_text: formattedTable2,\n    tableau_3_text: formattedTable3,\n    // Format combinÃ© si vous voulez tout en une fois\n    all_tables_text: formattedTable1 + '\\n\\n' + formattedTable2 + '\\n\\n' + formattedTable3\n  }\n}];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -1328,
        3040
      ],
      "id": "420239d7-db4b-49a9-86d9-3ae16d2c23e9",
      "name": "Code"
    },
    {
      "parameters": {
        "numberInputs": 3
      },
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3.2,
      "position": [
        -688,
        3040
      ],
      "id": "8ffb3c2d-424a-4b19-b29d-8de9c89cbd85",
      "name": "Merge1"
    },
    {
      "parameters": {
        "workflowId": {
          "__rl": true,
          "value": "7MO9r8wEjRc7IVDC",
          "mode": "list",
          "cachedResultName": "Scoring Tableau Hypotheses"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {
            "formatted_analysis": "={{ $('JSON -> String').item.json.formatted_analysis }}",
            "tableau_1_text": "={{ $json.tableau_1_text }}"
          },
          "matchingColumns": [
            "formatted_analysis",
            "tableau_1_text"
          ],
          "schema": [
            {
              "id": "formatted_analysis",
              "displayName": "formatted_analysis",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "tableau_1_text",
              "displayName": "tableau_1_text",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": true
        },
        "options": {}
      },
      "type": "n8n-nodes-base.executeWorkflow",
      "typeVersion": 1.2,
      "position": [
        -1024,
        2848
      ],
      "name": "Call Scoring Tableau Hypotheses",
      "id": "0c3a2b5f-7252-4566-b552-8ea91e2331a8"
    },
    {
      "parameters": {
        "workflowId": {
          "__rl": true,
          "value": "7MO9r8wEjRc7IVDC",
          "mode": "list",
          "cachedResultName": "Scoring Tableau Hypotheses"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {
            "formatted_analysis": "={{ $('JSON -> String').item.json.formatted_analysis }}",
            "tableau_1_text": "={{ $json.tableau_2_text }}"
          },
          "matchingColumns": [
            "formatted_analysis",
            "tableau_1_text"
          ],
          "schema": [
            {
              "id": "formatted_analysis",
              "displayName": "formatted_analysis",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "tableau_1_text",
              "displayName": "tableau_1_text",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": true
        },
        "options": {}
      },
      "type": "n8n-nodes-base.executeWorkflow",
      "typeVersion": 1.2,
      "position": [
        -1024,
        3072
      ],
      "name": "Call Scoring Tableau Hypotheses1",
      "id": "e1063450-e8e7-424f-ba8d-f18b2ad80072"
    },
    {
      "parameters": {
        "workflowId": {
          "__rl": true,
          "value": "7MO9r8wEjRc7IVDC",
          "mode": "list",
          "cachedResultName": "Scoring Tableau Hypotheses"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {
            "formatted_analysis": "={{ $('JSON -> String').item.json.formatted_analysis }}",
            "tableau_1_text": "={{ $json.tableau_3_text }}"
          },
          "matchingColumns": [
            "formatted_analysis",
            "tableau_1_text"
          ],
          "schema": [
            {
              "id": "formatted_analysis",
              "displayName": "formatted_analysis",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "tableau_1_text",
              "displayName": "tableau_1_text",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": true
        },
        "options": {}
      },
      "type": "n8n-nodes-base.executeWorkflow",
      "typeVersion": 1.2,
      "position": [
        -1024,
        3312
      ],
      "name": "Call Scoring Tableau Hypotheses2",
      "id": "403e216a-3e7a-40bd-9973-d6d006e0ded4"
    },
    {
      "parameters": {
        "content": "## On se retrouve avec 6 hypothÃ¨ses Ã  tester",
        "height": 980,
        "width": 400
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -608,
        2640
      ],
      "typeVersion": 1,
      "id": "4bda7041-a54c-49c3-aec0-2670d4f5f296",
      "name": "Sticky Note1"
    },
    {
      "parameters": {
        "content": "## Insert des hypothÃ¨ses Ã  tester dans Notion",
        "height": 980,
        "width": 1720,
        "color": 3
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -144,
        2640
      ],
      "typeVersion": 1,
      "id": "f7db398b-64df-4ccf-8b45-a028f349f7f2",
      "name": "Sticky Note"
    },
    {
      "parameters": {
        "fieldToSplitOut": "combinations_retenues",
        "options": {}
      },
      "type": "n8n-nodes-base.splitOut",
      "typeVersion": 1,
      "position": [
        -240,
        3040
      ],
      "id": "a87e2674-80b4-462c-b10d-128e622de5eb",
      "name": "Split Out2"
    },
    {
      "parameters": {
        "fieldsToAggregate": {
          "fieldToAggregate": [
            {
              "fieldToAggregate": "output.combinations_retenues"
            }
          ]
        },
        "options": {
          "mergeLists": true
        }
      },
      "type": "n8n-nodes-base.aggregate",
      "typeVersion": 1,
      "position": [
        -464,
        3040
      ],
      "id": "77f2bfa3-d5f5-4338-985e-b53cbe6dc133",
      "name": "Aggregate only hypotheses retenus"
    },
    {
      "parameters": {
        "content": "## GÃ©nÃ©ration et consolidation du contexte projet\nNote : Les informations du projet sont rentrÃ©s par les porteurs de projet lors du kickoff avec AlpAct",
        "height": 980,
        "width": 1160
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -3424,
        2640
      ],
      "typeVersion": 1,
      "id": "3edbdf6a-bb30-41e8-a86f-66068b4d975c",
      "name": "Sticky Note2"
    },
    {
      "parameters": {
        "content": "## GÃ©nÃ©ration des diffÃ©rentes hypothÃ¨ses PMF\n1. Le LLM crÃ©e 27 combinaisons possibles de (Proposition de valeur X Segment Client X problÃ¨me rÃ©solu)\n2. Le LLM trie ces combinaisons pour ne garder que les 6 plus pertinentes\n",
        "height": 980,
        "width": 1460
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -2240,
        2640
      ],
      "typeVersion": 1,
      "id": "dd4a334a-bbd3-45d6-96e3-32e81bf56a68",
      "name": "Sticky Note3"
    },
    {
      "parameters": {
        "resource": "databasePage",
        "databaseId": {
          "__rl": true,
          "value": "={{ $('Merge2').item.json.database_id }}",
          "mode": "id"
        },
        "title": "={{ $('Split Out2').item.json.resume }}",
        "propertiesUi": {
          "propertyValues": [
            {
              "key": "ProblÃ¨me rÃ©solu|rich_text",
              "textContent": "={{ $json.probleme_resolu }}"
            },
            {
              "key": "Pourquoi la tester|rich_text",
              "textContent": "={{ $json.pourquoi_tester }}"
            },
            {
              "key": "Proposition de valeur|rich_text",
              "textContent": "={{ $json.value_prop }}"
            },
            {
              "key": "Segment client|rich_text",
              "textContent": "={{ $json.segment_client }}"
            },
            {
              "key": "Hypothese_Id|rich_text",
              "textContent": "={{ $json.hypothesis_id }}"
            },
            {
              "key": "project_name|rich_text",
              "textContent": "={{ $json.project_name }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.notion",
      "typeVersion": 2.2,
      "position": [
        832,
        3072
      ],
      "id": "3221981c-3cc7-4e65-a3d6-f8bfc6386682",
      "name": "Ajout des hypothÃ¨ses dans Notion",
      "credentials": {
        "notionApi": {
          "id": "snOvbWupBFXeHmM7",
          "name": "Notion AlpAct"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "// RÃ©cupÃ©rer les donnÃ©es du nÅ“ud prÃ©cÃ©dent\nconst data = $input.all();\n\n// Fonction pour transformer le JSON d'analyse en texte structurÃ©\nfunction formatAnalysisForPrompt(item) {\n  const analysis = item.json.output;\n  \n  return `\nVISION DU PROJET:\n- Mission: ${analysis.vision_projet.mission}\n- ProblÃ¨me central: ${analysis.vision_projet.probleme_central}\n- Solution proposÃ©e: ${analysis.vision_projet.solution_proposee}\n\nMARCHÃ‰ CIBLE:\n- Segment principal: ${analysis.marche_cible.segment_principal}\n- Taille du marchÃ©: ${analysis.marche_cible.taille_marche}\n- Concurrents principaux:\n  ${analysis.marche_cible.concurrents_principaux.map(c => `  â€¢ ${c}`).join('\\n')}\n- Canaux d'acquisition:\n  ${analysis.marche_cible.canaux_acquisition.map(c => `  â€¢ ${c}`).join('\\n')}\n\nPRODUIT:\n- Proposition de valeur: ${analysis.produit.value_proposition}\n- FonctionnalitÃ©s clÃ©s:\n  ${analysis.produit.fonctionnalites_cles.map(f => `  â€¢ ${f}`).join('\\n')}\n- Avantage concurrentiel: ${analysis.produit.avantage_concurrentiel}\n\nCONTEXTE BUSINESS:\n- Stade du projet: ${analysis.contexte_business.stade_projet}\n- Objectifs prioritaires:\n  ${analysis.contexte_business.objectifs_prioritaires.map(o => `  â€¢ ${o}`).join('\\n')}\n- Contraintes identifiÃ©es: ${analysis.contexte_business.contraintes_identifiees}\n\nHYPOTHÃˆSES DE DÃ‰PART:\n- Sur le problÃ¨me: ${analysis.hypotheses_depart.sur_probleme}\n- Sur la cible: ${analysis.hypotheses_depart.sur_cible}\n- Sur la solution: ${analysis.hypotheses_depart.sur_solution}\n\nGAPS ET QUESTIONS:\n- Informations manquantes:\n  ${analysis.gaps_questions.infos_manquantes.map(i => `  â€¢ ${i}`).join('\\n')}\n\n- IncohÃ©rences dÃ©tectÃ©es:\n  ${analysis.gaps_questions.incoherences.map(i => `  â€¢ ${i}`).join('\\n')}\n\n- Zones de flou:\n  ${analysis.gaps_questions.zones_flou.map(z => `  â€¢ ${z}`).join('\\n')}\n\n---\n`;\n}\n\n// Transformer tous les items en texte\nconst formattedText = data.map(formatAnalysisForPrompt).join('\\n');\n\n// Retourner le texte formatÃ©\nreturn [{\n  json: {\n    formatted_analysis: formattedText\n  }\n}];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -2576,
        3264
      ],
      "id": "c1e3b68d-82e1-4101-b835-9c334377b8a9",
      "name": "JSON -> String"
    },
    {
      "parameters": {
        "authentication": "nocoDbApiToken",
        "operation": "create",
        "workspaceId": "w8fin9y3",
        "projectId": "pb01kdovzticqxi",
        "table": "mgkbmw38vd2aknn",
        "fieldsUi": {
          "fieldValues": [
            {
              "fieldName": "mission",
              "fieldValue": "={{ $('Creation contexte projet').item.json.output.vision_projet.mission }}"
            },
            {
              "fieldName": "=probleme_central",
              "fieldValue": "={{ $('Creation contexte projet').item.json.output.vision_projet.probleme_central }}"
            },
            {
              "fieldName": "=solution_proposee",
              "fieldValue": "={{ $('Creation contexte projet').item.json.output.vision_projet.solution_proposee }}"
            },
            {
              "fieldName": "=segment_principal",
              "fieldValue": "={{ $('Creation contexte projet').item.json.output.marche_cible.segment_principal }}"
            },
            {
              "fieldName": "=concurrents_principaux",
              "fieldValue": "={{ $('Creation contexte projet').item.json.output.marche_cible.concurrents_principaux }}"
            },
            {
              "fieldName": "=value_proposition",
              "fieldValue": "={{ $('Creation contexte projet').item.json.output.produit.value_proposition }}"
            },
            {
              "fieldName": "=fonctionnalites_cles",
              "fieldValue": "={{ $('Creation contexte projet').item.json.output.produit.fonctionnalites_cles }}"
            },
            {
              "fieldName": "=avantage_concurrentiel",
              "fieldValue": "={{ $('Creation contexte projet').item.json.output.produit.avantage_concurrentiel }}"
            },
            {
              "fieldName": "=stade_projet",
              "fieldValue": "={{ $('Creation contexte projet').item.json.output.contexte_business.stade_projet }}"
            },
            {
              "fieldName": "=objectifs_prioritaires",
              "fieldValue": "={{ $('Creation contexte projet').item.json.output.contexte_business.objectifs_prioritaires }}"
            },
            {
              "fieldName": "=contraintes_identifiees",
              "fieldValue": "={{ $('Creation contexte projet').item.json.output.contexte_business.contraintes_identifiees }}"
            },
            {
              "fieldName": "=hypotheses_depart_sur_probleme",
              "fieldValue": "={{ $('Creation contexte projet').item.json.output.hypotheses_depart.sur_probleme }}"
            },
            {
              "fieldName": "hypotheses_depart_sur_solution",
              "fieldValue": "={{ $('Creation contexte projet').item.json.output.hypotheses_depart.sur_solution }}"
            },
            {
              "fieldName": "hypotheses_depart_sur_cible",
              "fieldValue": "={{ $('Creation contexte projet').item.json.output.hypotheses_depart.sur_cible }}"
            },
            {
              "fieldName": "infos_manquantes",
              "fieldValue": "={{ $('Creation contexte projet').item.json.output.gaps_questions.infos_manquantes }}"
            },
            {
              "fieldName": "incoherences",
              "fieldValue": "={{ $('Creation contexte projet').item.json.output.gaps_questions.incoherences }}"
            },
            {
              "fieldName": "zones_flou",
              "fieldValue": "={{ $('Creation contexte projet').item.json.output.gaps_questions.zones_flou }}"
            },
            {
              "fieldName": "ID_Notion",
              "fieldValue": "={{ $('Get infos projet').item.json.ID_Notion }}"
            },
            {
              "fieldName": "project_name",
              "fieldValue": "={{ $('Get infos projet').item.json.project_name }}"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.nocoDb",
      "typeVersion": 3,
      "position": [
        -2464,
        3008
      ],
      "id": "ed54aa8e-ac9f-4292-8aac-51599da7d413",
      "name": "Save contexte projet",
      "credentials": {
        "nocoDbApiToken": {
          "id": "A7ud9P88oTJkeL1f",
          "name": "NocoDb AlpAct - Cloud"
        }
      }
    },
    {
      "parameters": {
        "mode": "combine",
        "combineBy": "combineByPosition",
        "options": {
          "includeUnpaired": true
        }
      },
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3.2,
      "position": [
        -2144,
        3040
      ],
      "id": "2e1a0045-c1bd-4d0d-a645-11edda160cb9",
      "name": "Merge"
    },
    {
      "parameters": {
        "mode": "combine",
        "combineBy": "combineAll",
        "options": {}
      },
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3.2,
      "position": [
        432,
        3072
      ],
      "id": "75fbf840-faa0-474c-aac0-593a2ccaae53",
      "name": "Merge2"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "57585531-799b-4c7d-99cb-0b32616e767c",
              "name": "database_id",
              "value": "=",
              "type": "string"
            }
          ]
        },
        "includeOtherFields": true,
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        48,
        3040
      ],
      "id": "5e252e83-9dc5-4857-800a-f3e32c51d22e",
      "name": "add database_id to json"
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.manualTrigger",
      "typeVersion": 1,
      "position": [
        448,
        2784
      ],
      "id": "c434960a-7b5a-4cb1-ba7f-51f4f2ffffee",
      "name": "When clicking â€˜Execute workflowâ€™"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "5b5483db-a3a9-42a7-a417-9d6dc7d7bd63",
              "name": "output",
              "value": "done",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        1312,
        3088
      ],
      "id": "7a2ff8b5-7ed1-4f84-a809-720e83415fcc",
      "name": "RETURN"
    },
    {
      "parameters": {
        "method": "PATCH",
        "url": "=https://api.notion.com/v1/pages/{{ $('Get infos projet').item.json.ID_Notion }}",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "notionApi",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "{\n  \"icon\": \n  { \n    \"type\": \"emoji\",\n    \"emoji\": \"âœ¨\"\n  }\n}\n\n",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        1024,
        3072
      ],
      "id": "66f2f5c4-92ae-4a39-a4e2-7a0274766bb2",
      "name": "Display Done Icon on Page",
      "executeOnce": true,
      "credentials": {
        "notionApi": {
          "id": "snOvbWupBFXeHmM7",
          "name": "Notion AlpAct"
        }
      }
    },
    {
      "parameters": {
        "authentication": "nocoDbApiToken",
        "operation": "getAll",
        "workspaceId": "w8fin9y3",
        "projectId": "pb01kdovzticqxi",
        "table": "mgkbmw38vd2aknn",
        "limit": 1,
        "options": {
          "where": "=(project_name,eq,{{ $('Get infos projet').item.json.project_name }})"
        }
      },
      "type": "n8n-nodes-base.nocoDb",
      "typeVersion": 3,
      "position": [
        -2848,
        2800
      ],
      "id": "332095cd-9b00-4663-80d3-caf1d2ad615b",
      "name": "Get project_context",
      "alwaysOutputData": true,
      "executeOnce": true,
      "credentials": {
        "nocoDbApiToken": {
          "id": "A7ud9P88oTJkeL1f",
          "name": "NocoDb AlpAct - Cloud"
        }
      }
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "f2263e1f-7634-4f88-bcbf-7f630a8d717e",
              "leftValue": "={{ $json.values().length }}",
              "rightValue": 0,
              "operator": {
                "type": "number",
                "operation": "gt"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        -2640,
        2800
      ],
      "id": "39cdd786-8052-4b88-910d-39eb1b4caef3",
      "name": "If project_context already exists"
    },
    {
      "parameters": {
        "authentication": "nocoDbApiToken",
        "operation": "create",
        "workspaceId": "w8fin9y3",
        "projectId": "pb01kdovzticqxi",
        "table": "mxejv5f52945plh",
        "fieldsUi": {
          "fieldValues": [
            {
              "fieldName": "project_name",
              "fieldValue": "={{ $('Get infos projet').item.json.project_name }}"
            },
            {
              "fieldName": "hypothesis_id",
              "fieldValue": "={{ $json.id}}_{{ $now.toMillis() }}"
            },
            {
              "fieldName": "name",
              "fieldValue": "={{ $json.resume }}"
            },
            {
              "fieldName": "probleme_resolu",
              "fieldValue": "={{ $json.probleme }}"
            },
            {
              "fieldName": "segment_client",
              "fieldValue": "={{ $json.segment }}"
            },
            {
              "fieldName": "value_prop",
              "fieldValue": "={{ $json.value_prop }}"
            },
            {
              "fieldName": "pourquoi_tester",
              "fieldValue": "={{ $json.raison_selection }}"
            },
            {
              "fieldName": "status",
              "fieldValue": "A tester"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.nocoDb",
      "typeVersion": 3,
      "position": [
        624,
        3072
      ],
      "id": "a8ea9550-9b03-42b7-a8e6-6c28df20c6c4",
      "name": "Ajout des hypotheses dans NocoDb",
      "credentials": {
        "nocoDbApiToken": {
          "id": "A7ud9P88oTJkeL1f",
          "name": "NocoDb AlpAct - Cloud"
        }
      }
    },
    {
      "parameters": {
        "workflowId": {
          "__rl": true,
          "value": "v5gvKdytgYdGjgYc",
          "mode": "list",
          "cachedResultName": "GetNotionDatabaseId"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {
            "targetDatabaseTitle": "Db_HypothÃ¨sesPMF",
            "targetParentPageId": "={{ $('Get infos projet').item.json.ID_Notion }}"
          },
          "matchingColumns": [
            "ID_Notion_firstItem"
          ],
          "schema": [
            {
              "id": "targetDatabaseTitle",
              "displayName": "targetDatabaseTitle",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "targetParentPageId",
              "displayName": "targetParentPageId",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": true
        },
        "options": {}
      },
      "type": "n8n-nodes-base.executeWorkflow",
      "typeVersion": 1.2,
      "position": [
        144,
        3280
      ],
      "name": "Call GetNotionDatabaseId",
      "id": "17cad77a-fa35-4979-ab4f-bed6b89cac3c"
    },
    {
      "parameters": {
        "workflowInputs": {
          "values": [
            {
              "name": "project_name"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.executeWorkflowTrigger",
      "typeVersion": 1.1,
      "position": [
        -4144,
        3040
      ],
      "id": "d9a82e27-4f65-4b13-a124-4c8121e89780",
      "name": "Start"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "gpt-5",
          "mode": "list",
          "cachedResultName": "gpt-5"
        },
        "options": {
          "responseFormat": "json_object",
          "timeout": 500000
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        -1920,
        3248
      ],
      "id": "7d308544-431c-44a4-a99d-3e6fffad611b",
      "name": "GPT-5 Calibrated",
      "notesInFlow": true,
      "credentials": {
        "openAiApi": {
          "id": "xA5aDLFhcAyipXLc",
          "name": "OpenAi account"
        }
      },
      "notes": "Pour maximiser la divergence et Ã©viter les redites :\nmodel: gpt-5\ntemperature: 0.9 (augmente la crÃ©ativitÃ©/divergence)\ntop_p: 0.9 (favorise la diversitÃ© tout en restant cohÃ©rent)\nfrequency_penalty: 0.4 (Ã©vite rÃ©pÃ©titions)\npresence_penalty: 0.6 (encourage lâ€™exploration de nouvelles idÃ©es)\nmax_tokens: 4000â€“6000 (il faut de la marge pour 27 combinaisons dÃ©taillÃ©es)"
    },
    {
      "parameters": {
        "workflowId": {
          "__rl": true,
          "value": "7MO9r8wEjRc7IVDC",
          "mode": "list",
          "cachedResultName": "Scoring Tableau Hypotheses"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {
            "formatted_analysis": "={{ $('JSON -> String').item.json.formatted_analysis }}",
            "tableau_1_text": "={{ $json.tableau_1.toJsonString() }}"
          },
          "matchingColumns": [
            "formatted_analysis",
            "tableau_1_text"
          ],
          "schema": [
            {
              "id": "formatted_analysis",
              "displayName": "formatted_analysis",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "tableau_1_text",
              "displayName": "tableau_1_text",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": true
        },
        "options": {}
      },
      "type": "n8n-nodes-base.executeWorkflow",
      "typeVersion": 1.2,
      "position": [
        -1008,
        3584
      ],
      "name": "Call Scoring Tableau Hypotheses3",
      "id": "a4be7331-18c2-47a3-83cd-0c04258278db"
    },
    {
      "parameters": {
        "numberInputs": 3
      },
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3.2,
      "position": [
        -656,
        3792
      ],
      "id": "a5f177cd-1882-4246-9c49-0c7ac24267cf",
      "name": "Merge3"
    },
    {
      "parameters": {
        "workflowId": {
          "__rl": true,
          "value": "7MO9r8wEjRc7IVDC",
          "mode": "list",
          "cachedResultName": "Scoring Tableau Hypotheses"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {
            "formatted_analysis": "={{ $('JSON -> String').item.json.formatted_analysis }}",
            "tableau_1_text": "={{ $json.tableau_2.toJsonString() }}"
          },
          "matchingColumns": [
            "formatted_analysis",
            "tableau_1_text"
          ],
          "schema": [
            {
              "id": "formatted_analysis",
              "displayName": "formatted_analysis",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "tableau_1_text",
              "displayName": "tableau_1_text",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": true
        },
        "options": {}
      },
      "type": "n8n-nodes-base.executeWorkflow",
      "typeVersion": 1.2,
      "position": [
        -1008,
        3824
      ],
      "name": "Call Scoring Tableau Hypotheses4",
      "id": "c0c8da89-d860-4185-a43e-ad001a8a42e2"
    },
    {
      "parameters": {
        "workflowId": {
          "__rl": true,
          "value": "7MO9r8wEjRc7IVDC",
          "mode": "list",
          "cachedResultName": "Scoring Tableau Hypotheses"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {
            "formatted_analysis": "={{ $('JSON -> String').item.json.formatted_analysis }}",
            "tableau_1_text": "={{ $json.tableau_3.toJsonString() }}"
          },
          "matchingColumns": [
            "formatted_analysis",
            "tableau_1_text"
          ],
          "schema": [
            {
              "id": "formatted_analysis",
              "displayName": "formatted_analysis",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "tableau_1_text",
              "displayName": "tableau_1_text",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": true
        },
        "options": {}
      },
      "type": "n8n-nodes-base.executeWorkflow",
      "typeVersion": 1.2,
      "position": [
        -992,
        4064
      ],
      "name": "Call Scoring Tableau Hypotheses5",
      "id": "a48e9a5b-ea07-40a7-ad1c-9d4bb9417011"
    }
  ],
  "pinData": {
    "Start": [
      {
        "json": {
          "project_name": "GreenPack"
        }
      }
    ],
    "Generation hypothÃ¨ses PMF": [
      {
        "json": {
          "output": {
            "problemes": [
              {
                "id": "P1",
                "titre": "CoÃ»t et volume de dÃ©chets dâ€™emballages jetables insoutenables",
                "description": "Les fast-foods indÃ©pendants dÃ©pensent chaque mois une part significative de leur marge en emballages jetables et en gestion des dÃ©chets (achats, stockage, Ã©vacuation), avec des coÃ»ts volatils et une pression rÃ©glementaire croissante. Les solutions alternatives (biodÃ©gradables/compostables) restent chÃ¨res et ne rÃ©duisent pas vraiment le volume de dÃ©chets. FrÃ©quence quotidienne, impact direct sur la marge et la propretÃ© en cuisine.",
                "intensite_estimee": "forte",
                "mesurable_par": "Audit 4 semaines: extraction des factures dâ€™emballages (â‚¬/mois, â‚¬/commande), pesÃ©e des dÃ©chets (kg/semaine) et ratio dÃ©chets/100 commandes; comparaison baseline vs benchmarks locaux."
              },
              {
                "id": "P2",
                "titre": "Frictions opÃ©rationnelles et dâ€™image liÃ©es au jetable",
                "description": "Le personnel subit une charge mentale (rÃ©assort, tri, dÃ©bordement de bacs), ce qui ralentit le service et dÃ©grade lâ€™expÃ©rience client. Les clients sensibles Ã  lâ€™Ã©cologie laissent des avis nÃ©gatifs sur le jetable, affectant la rÃ©putation RSE et les ventes. FrÃ©quence Ã©levÃ©e aux heures de pointe; frustrations rÃ©currentes.",
                "intensite_estimee": "moyenne",
                "mesurable_par": "Interviews (n=10), chronomÃ©trage caisse (sec/commande), NPS clients et analyse des avis Google/Instagram (occurrences de 'dÃ©chet', 'plastique', 'emballage')."
              },
              {
                "id": "P3",
                "titre": "Verrous systÃ©miques: logistique, intÃ©gration SI et hygiÃ¨ne",
                "description": "MÃªme motivÃ©s, les gÃ©rants nâ€™adoptent pas le rÃ©emploi faute dâ€™infrastructure fiable (collecte/lavage), dâ€™intÃ©gration digitale simple (POS/QR/plateformes) et de clartÃ© rÃ©glementaire (HACCP, traÃ§abilitÃ©). Lâ€™absence dâ€™un fournisseur end-to-end et la peur du non-retour bloquent la dÃ©cision.",
                "intensite_estimee": "forte",
                "mesurable_par": "Cartographie prestataires (nombre, rayon, SLA), test dâ€™intÃ©gration POS sandbox, audit HACCP par consultant, micro-pilote de collecte J+1 (taux de retour, pertes, conformitÃ©)."
              }
            ],
            "segments": [
              {
                "id": "S1",
                "nom": "GÃ©rants de fast-food indÃ©pendants engagÃ©s (ChambÃ©ry et alentours)",
                "description": "IndÃ©pendants 35â€“50 ans, sensibles aux coÃ»ts et Ã  lâ€™image RSE; cuisines fast-casual/Ã  emporter; Ã©quipes 3â€“10 pers.; dÃ©cisions rapides si ROI clair et mise en Å“uvre simple.",
                "taille_estimee": "Savoie (73) et alentours: ~400 fast-food/fast-casual indÃ©pendants; cible prioritaire bio/locaux/engagÃ©s: 80â€“120 Ã©tablissements (sources: INSEE/CCI + annuaires locaux).",
                "canaux_acces": [
                  "LinkedIn Sales Navigator (ciblage dirigeants restauration ChambÃ©ry/Annecy)",
                  "Emailing ciblÃ© via annuaires CCI Savoie",
                  "RÃ©seaux locaux (ChambÃ©ry Grand Lac Ã‰conomie, French Tech in the Alps)"
                ],
                "comportements_cles": "Achats dâ€™emballages mensuels via grossistes; arbitrage coÃ»t/qualitÃ©; ouverture Ã  un pilote si opÃ©ration simple et sans CAPEX; valorise la preuve locale.",
                "market_type": "B2B"
              },
              {
                "id": "S2",
                "nom": "Dark kitchens et restaurants Ã  forte part livraison (AURA)",
                "description": "Cuisines sans salle et restos >60% de commandes via plateformes (Uber Eats/Deliveroo/Just Eat); priorisent vitesse, Ã©tanchÃ©itÃ© et satisfaction livrÃ©e.",
                "taille_estimee": "AURA: 1 200â€“1 600 sites orientÃ©s livraison (estim. plateformes + SIRENE); cible initiale 100â€“200 autour de ChambÃ©ry/Grenoble/Annecy.",
                "canaux_acces": [
                  "Partenariats locaux avec plateformes de livraison",
                  "Prospection SIRENE filtrÃ©e 'livraison' + emailing",
                  "Groupes WhatsApp/Slack de restaurateurs livraison"
                ],
                "comportements_cles": "Volumes soir/week-end; recherche fiabilitÃ© et standardisation; trÃ¨s sensibles aux avis clients et aux coÃ»ts par commande; testent volontiers sur un site pilote.",
                "market_type": "B2B2C"
              },
              {
                "id": "S3",
                "nom": "Organisateurs dâ€™Ã©vÃ©nements et campus zÃ©ro dÃ©chet",
                "description": "Festivals, salons, marchÃ©s, services Ã©vÃ©nements universitaires; forte visibilitÃ© publique; objectifs ZD et contraintes locales de propretÃ©.",
                "taille_estimee": "Savoie/Haute-Savoie: ~60 Ã©vÃ©nements >1 000 visiteurs/an + 3 campus majeurs; 100â€“150 points de vente temporaires/an (agendas territoriaux + rÃ©seaux associatifs).",
                "canaux_acces": [
                  "Services Ã©vÃ©nementiels des mairies/agglo",
                  "RÃ©seau Zero Waste France et associations locales",
                  "Salons professionnels RSE/Ã©vÃ©nementiel (ex: Mountain Planet, OSV)"
                ],
                "comportements_cles": "SaisonnalitÃ©; contrats courts; appÃ©tence pour solutions clÃ© en main avec staff briefÃ©; valorisent garanties, conformitÃ© et communication RSE.",
                "market_type": "B2B"
              }
            ],
            "value_propositions": [
              {
                "id": "VP1",
                "titre": "RÃ©duire les coÃ»ts et les dÃ©chets dâ€™emballage jusquâ€™Ã  70%",
                "description": "SystÃ¨me de boÃ®tes rÃ©utilisables consignÃ©es avec logistique de collecte/lavage et tableau de bord ROI pour baisser le coÃ»t par commande et le volume de dÃ©chets.",
                "differenciateur": "Offre end-to-end locale (collecte/lavage) + consigne digitale sans friction; optimisÃ©e fast-food; pas de CAPEX, tarification Ã  lâ€™usage.",
                "preuve_valeur": "Pilote 30 jours: baseline vs post, â‚¬/commande emballage et kg de dÃ©chets Ã©vitÃ©s mesurÃ©s; rapport ROI remis et validÃ© par le gÃ©rant.",
                "key_benefits": [
                  "Jusquâ€™Ã  -30 Ã  -50% de coÃ»t dâ€™emballage/commande",
                  "Moins de rotations et de bacs dÃ©bordants",
                  "Indicateurs RSE prÃªts Ã  communiquer"
                ],
                "product_name": "Pack RÃ©emploi ROI"
              },
              {
                "id": "VP2",
                "titre": "DÃ©ploiement express et expÃ©rience fluide (sans interruption)",
                "description": "Installation en 24h, QR code sans application, formation Ã©quipe, intÃ©grations POS/plateformes; flux client simple et rapide.",
                "differenciateur": "Stack digitale prÃªte Ã  lâ€™emploi + logistique synchronisÃ©e; kits comptoir, scripts et support sur site la premiÃ¨re semaine.",
                "preuve_valeur": "Test Ã©clair 7 jours: temps de service chronomÃ©trÃ©, taux dâ€™adoption client >40%, zÃ©ro file dâ€™attente additionnelle.",
                "key_benefits": [
                  "Onboarding en 1 jour",
                  "RÃ©duction du stress en caisse",
                  "ComprÃ©hension client en <10 secondes"
                ],
                "product_name": "Starter Plug&Play"
              },
              {
                "id": "VP3",
                "titre": "ZÃ©ro risque: garanties, conformitÃ© et preuve sociale",
                "description": "Contrat avec objectifs et remboursement si non atteints, conformitÃ© HACCP, assurance pertes, cas clients et labels RSE pour convaincre parties prenantes.",
                "differenciateur": "Combo garantie de performance + assurance + conformitÃ© auditÃ©e; badge public 'ZÃ©ro DÃ©chet en cours' et tÃ©moignages pairs locaux.",
                "preuve_valeur": "POC 14â€“30 jours avec KPIs contractuels; certificat hygiÃ¨ne; vidÃ©os tÃ©moignages et rÃ©fÃ©rences du territoire.",
                "key_benefits": [
                  "Risque perÃ§u minimal",
                  "CrÃ©dibilitÃ© vis-Ã -vis des clients et autoritÃ©s",
                  "DÃ©cision dâ€™achat accÃ©lÃ©rÃ©e"
                ],
                "product_name": "SafeSwitch ZÃ©ro DÃ©chet"
              }
            ],
            "metadata": {
              "projet": "RÃ©duire les dÃ©chets plastiques Ã  usage unique grÃ¢ce Ã  des emballages rÃ©utilisables et consignÃ©s.",
              "total_combinaisons": 27,
              "genere_le": "2025-09-10T13:11:38+02:00"
            }
          }
        }
      }
    ]
  },
  "connections": {
    "Get infos projet": {
      "main": [
        [
          {
            "node": "Format data projet",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser3": {
      "ai_outputParser": [
        [
          {
            "node": "Creation contexte projet",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "Creation contexte projet": {
      "main": [
        [
          {
            "node": "JSON -> String",
            "type": "main",
            "index": 0
          },
          {
            "node": "Get project_context",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser4": {
      "ai_outputParser": [
        [
          {
            "node": "Generation hypothÃ¨ses PMF",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "Generation hypothÃ¨ses PMF": {
      "main": [
        [
          {
            "node": "Transform en Tableaux 9X9X9 combinaisons",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "GPT-5-MINI": {
      "ai_languageModel": [
        [
          {
            "node": "Creation contexte projet",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Format data projet": {
      "main": [
        [
          {
            "node": "Creation contexte projet",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Transform en Tableaux 9X9X9 combinaisons": {
      "main": [
        [
          {
            "node": "Code",
            "type": "main",
            "index": 0
          },
          {
            "node": "Call Scoring Tableau Hypotheses3",
            "type": "main",
            "index": 0
          },
          {
            "node": "Call Scoring Tableau Hypotheses4",
            "type": "main",
            "index": 0
          },
          {
            "node": "Call Scoring Tableau Hypotheses5",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code": {
      "main": [
        [
          {
            "node": "Call Scoring Tableau Hypotheses",
            "type": "main",
            "index": 0
          },
          {
            "node": "Call Scoring Tableau Hypotheses1",
            "type": "main",
            "index": 0
          },
          {
            "node": "Call Scoring Tableau Hypotheses2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Call Scoring Tableau Hypotheses": {
      "main": [
        [
          {
            "node": "Merge1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Call Scoring Tableau Hypotheses1": {
      "main": [
        [
          {
            "node": "Merge1",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "Call Scoring Tableau Hypotheses2": {
      "main": [
        [
          {
            "node": "Merge1",
            "type": "main",
            "index": 2
          }
        ]
      ]
    },
    "Merge1": {
      "main": [
        [
          {
            "node": "Aggregate only hypotheses retenus",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Split Out2": {
      "main": [
        [
          {
            "node": "add database_id to json",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Aggregate only hypotheses retenus": {
      "main": [
        [
          {
            "node": "Split Out2",
            "type": "main",
            "index": 0
          },
          {
            "node": "Call GetNotionDatabaseId",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Ajout des hypothÃ¨ses dans Notion": {
      "main": [
        [
          {
            "node": "Display Done Icon on Page",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "JSON -> String": {
      "main": [
        [
          {
            "node": "Merge",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "Save contexte projet": {
      "main": [
        [
          {
            "node": "Merge",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Merge": {
      "main": [
        [
          {
            "node": "Generation hypothÃ¨ses PMF",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Merge2": {
      "main": [
        [
          {
            "node": "Ajout des hypotheses dans NocoDb",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "add database_id to json": {
      "main": [
        [
          {
            "node": "Merge2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "When clicking â€˜Execute workflowâ€™": {
      "main": [
        [
          {
            "node": "RETURN",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Display Done Icon on Page": {
      "main": [
        [
          {
            "node": "RETURN",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get project_context": {
      "main": [
        [
          {
            "node": "If project_context already exists",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If project_context already exists": {
      "main": [
        [
          {
            "node": "Merge",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Save contexte projet",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Ajout des hypotheses dans NocoDb": {
      "main": [
        [
          {
            "node": "Ajout des hypothÃ¨ses dans Notion",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Call GetNotionDatabaseId": {
      "main": [
        [
          {
            "node": "Merge2",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "Start": {
      "main": [
        [
          {
            "node": "Get infos projet",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "GPT-5 Calibrated": {
      "ai_languageModel": [
        [
          {
            "node": "Generation hypothÃ¨ses PMF",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Call Scoring Tableau Hypotheses3": {
      "main": [
        [
          {
            "node": "Merge3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Merge3": {
      "main": [
        [
          {
            "node": "Aggregate only hypotheses retenus",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Call Scoring Tableau Hypotheses4": {
      "main": [
        [
          {
            "node": "Merge3",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "Call Scoring Tableau Hypotheses5": {
      "main": [
        [
          {
            "node": "Merge3",
            "type": "main",
            "index": 2
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "ca2bb1b6-d882-4d1b-9360-45a60e9e9db8",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "cb0d888b2669ace4f2f781e684ee8100f0ad3fd9239d2c021aab9cca9e9602ef"
  },
  "id": "DPcwNm4VwzwSFpwT",
  "tags": [
    {
      "createdAt": "2025-09-03T16:26:16.510Z",
      "updatedAt": "2025-09-03T16:26:16.510Z",
      "id": "fMhvLwPBTuM8eI5O",
      "name": "AlpAct"
    }
  ]
}